<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Machinery for hygienic macros."><title>rustc_span::hygiene - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-5ca6ca2a1f83705a.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rustc_span" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0-dev" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-d2fab2bf619172d3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../rustc_span/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../rustc_span/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2><a href="../../rustc_span/index.html">rustc_span</a><span class="version">1.82.0-dev</span></h2></div><h2 class="location"><a href="#">Module hygiene</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate rustc_span</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">rustc_span</a>::<wbr><a class="mod" href="#">hygiene</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/rustc_span/hygiene.rs.html#1-1564">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Machinery for hygienic macros.</p>
<p>Inspired by Matthew Flatt et al., “Macros That Work Together: Compile-Time Bindings, Partial
Expansion, and Definition Contexts,” <em>Journal of Functional Programming</em> 22, no. 2
(March 1, 2012): 181–216, <a href="https://doi.org/10.1017/S0956796812000093">https://doi.org/10.1017/S0956796812000093</a>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData">ExpnData</a></div><div class="desc docblock-short">A subset of properties from both macro definition and macro call available through global data.
Avoid using this if you have access to the original definition or call structures.</div></li><li><div class="item-name"><a class="struct" href="struct.ExpnHash.html" title="struct rustc_span::hygiene::ExpnHash">ExpnHash</a></div><div class="desc docblock-short">A unique hash value associated to an expansion.</div></li><li><div class="item-name"><a class="struct" href="struct.ExpnId.html" title="struct rustc_span::hygiene::ExpnId">ExpnId</a></div><div class="desc docblock-short">A unique ID associated with a macro invocation and expansion.</div></li><li><div class="item-name"><a class="struct" href="struct.ExpnIndex.html" title="struct rustc_span::hygiene::ExpnIndex">ExpnIndex</a></div><div class="desc docblock-short">A unique ID associated with a macro invocation and expansion.</div></li><li><div class="item-name"><a class="struct" href="struct.HygieneData.html" title="struct rustc_span::hygiene::HygieneData">HygieneData</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.HygieneDecodeContext.html" title="struct rustc_span::hygiene::HygieneDecodeContext">HygieneDecodeContext</a></div><div class="desc docblock-short">Additional information used to assist in decoding hygiene data</div></li><li><div class="item-name"><a class="struct" href="struct.HygieneDecodeContextInner.html" title="struct rustc_span::hygiene::HygieneDecodeContextInner">HygieneDecodeContextInner</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Additional information used to assist in decoding hygiene data</div></li><li><div class="item-name"><a class="struct" href="struct.HygieneEncodeContext.html" title="struct rustc_span::hygiene::HygieneEncodeContext">HygieneEncodeContext</a></div></li><li><div class="item-name"><a class="struct" href="struct.LocalExpnId.html" title="struct rustc_span::hygiene::LocalExpnId">LocalExpnId</a></div><div class="desc docblock-short">A unique ID associated with a macro invocation and expansion.</div></li><li><div class="item-name"><a class="struct" href="struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext">SyntaxContext</a></div><div class="desc docblock-short">A <code>SyntaxContext</code> represents a chain of pairs <code>(ExpnId, Transparency)</code> named “marks”.</div></li><li><div class="item-name"><a class="struct" href="struct.SyntaxContextData.html" title="struct rustc_span::hygiene::SyntaxContextData">SyntaxContextData</a></div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.AstPass.html" title="enum rustc_span::hygiene::AstPass">AstPass</a></div><div class="desc docblock-short">The kind of AST transform.</div></li><li><div class="item-name"><a class="enum" href="enum.DesugaringKind.html" title="enum rustc_span::hygiene::DesugaringKind">DesugaringKind</a></div><div class="desc docblock-short">The kind of compiler desugaring.</div></li><li><div class="item-name"><a class="enum" href="enum.ExpnKind.html" title="enum rustc_span::hygiene::ExpnKind">ExpnKind</a></div><div class="desc docblock-short">Expansion kind.</div></li><li><div class="item-name"><a class="enum" href="enum.MacroKind.html" title="enum rustc_span::hygiene::MacroKind">MacroKind</a></div><div class="desc docblock-short">The kind of macro invocation or definition.</div></li><li><div class="item-name"><a class="enum" href="enum.Transparency.html" title="enum rustc_span::hygiene::Transparency">Transparency</a></div><div class="desc docblock-short">A property of a macro expansion that determines how identifiers
produced by that expansion are resolved.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.assert_default_hashing_controls.html" title="fn rustc_span::hygiene::assert_default_hashing_controls">assert_default_hashing_controls</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Assert that the provided <code>HashStableContext</code> is configured with the ‘default’
<code>HashingControls</code>. We should always have bailed out before getting to here
with a non-default mode. With this check in place, we can avoid the need
to maintain separate versions of <code>ExpnData</code> hashes for each permutation
of <code>HashingControls</code> settings.</div></li><li><div class="item-name"><a class="fn" href="fn.debug_hygiene_data.html" title="fn rustc_span::hygiene::debug_hygiene_data">debug_hygiene_data</a></div></li><li><div class="item-name"><a class="fn" href="fn.decode_expn_id.html" title="fn rustc_span::hygiene::decode_expn_id">decode_expn_id</a></div><div class="desc docblock-short">Decode an expansion from the metadata of a foreign crate.</div></li><li><div class="item-name"><a class="fn" href="fn.decode_syntax_context.html" title="fn rustc_span::hygiene::decode_syntax_context">decode_syntax_context</a></div></li><li><div class="item-name"><a class="fn" href="fn.for_all_ctxts_in.html" title="fn rustc_span::hygiene::for_all_ctxts_in">for_all_ctxts_in</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.for_all_expns_in.html" title="fn rustc_span::hygiene::for_all_expns_in">for_all_expns_in</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.raw_encode_syntax_context.html" title="fn rustc_span::hygiene::raw_encode_syntax_context">raw_encode_syntax_context</a></div></li><li><div class="item-name"><a class="fn" href="fn.register_expn_id.html" title="fn rustc_span::hygiene::register_expn_id">register_expn_id</a></div><div class="desc docblock-short">Register an expansion which has been decoded from the metadata of a foreign crate.</div></li><li><div class="item-name"><a class="fn" href="fn.register_local_expn_id.html" title="fn rustc_span::hygiene::register_local_expn_id">register_local_expn_id</a></div><div class="desc docblock-short">Register an expansion which has been decoded from the on-disk-cache for the local crate.</div></li><li><div class="item-name"><a class="fn" href="fn.update_disambiguator.html" title="fn rustc_span::hygiene::update_disambiguator">update_disambiguator</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Updates the <code>disambiguator</code> field of the corresponding <code>ExpnData</code>
such that the <code>Fingerprint</code> of the <code>ExpnData</code> does not collide with
any other <code>ExpnIds</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.update_dollar_crate_names.html" title="fn rustc_span::hygiene::update_dollar_crate_names">update_dollar_crate_names</a></div></li><li><div class="item-name"><a class="fn" href="fn.walk_chain.html" title="fn rustc_span::hygiene::walk_chain">walk_chain</a></div></li><li><div class="item-name"><a class="fn" href="fn.walk_chain_collapsed.html" title="fn rustc_span::hygiene::walk_chain_collapsed">walk_chain_collapsed</a></div><div class="desc docblock-short">In order to have good line stepping behavior in debugger, for the given span we return its
outermost macro call site that still has a <code>#[collapse_debuginfo(yes)]</code> property on it.
We also stop walking call sites at the function body level because no line stepping can occur
at the level above that.
The returned span can then be used in emitted debuginfo.</div></li></ul></section></div></main></body></html>