<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `NormalizeExt` trait in crate `rustc_trait_selection`."><title>NormalizeExt in rustc_trait_selection::traits::normalize - Rust</title><script> if (window.location.protocol !== "file:") document.write(`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2">`)</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="rustc_trait_selection" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-dev" data-channel="nightly" data-search-js="search-42d8da7a6b9792c2.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-12cf3b4f4f9dc36d.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../rustc_trait_selection/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../rustc_trait_selection/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2><a href="../../../rustc_trait_selection/index.html">rustc_trait_selection</a><span class="version">1.78.0-dev</span></h2></div><h2 class="location"><a href="#">NormalizeExt</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.deeply_normalize">deeply_normalize</a></li><li><a href="#tymethod.normalize">normalize</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In rustc_trait_selection::traits::normalize</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../rustc_trait_selection/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../../index.html">rustc_trait_selection</a>::<wbr><a href="../index.html">traits</a>::<wbr><a href="index.html">normalize</a>::<wbr><a class="trait" href="#">NormalizeExt</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/rustc_trait_selection/traits/normalize.rs.html#15">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait NormalizeExt&lt;'tcx&gt; {
    // Required methods
    fn <a href="#tymethod.normalize" class="fn">normalize</a>&lt;T: <a class="trait" href="../../../rustc_type_ir/fold/trait.TypeFoldable.html" title="trait rustc_type_ir::fold::TypeFoldable">TypeFoldable</a>&lt;<a class="struct" href="../../../rustc_middle/ty/context/struct.TyCtxt.html" title="struct rustc_middle::ty::context::TyCtxt">TyCtxt</a>&lt;'tcx&gt;&gt;&gt;(
        &amp;self,
        value: T
    ) -&gt; <a class="struct" href="../../infer/struct.InferOk.html" title="struct rustc_trait_selection::infer::InferOk">InferOk</a>&lt;'tcx, T&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.deeply_normalize" class="fn">deeply_normalize</a>&lt;T: <a class="trait" href="../../../rustc_type_ir/fold/trait.TypeFoldable.html" title="trait rustc_type_ir::fold::TypeFoldable">TypeFoldable</a>&lt;<a class="struct" href="../../../rustc_middle/ty/context/struct.TyCtxt.html" title="struct rustc_middle::ty::context::TyCtxt">TyCtxt</a>&lt;'tcx&gt;&gt;&gt;(
        self,
        value: T,
        fulfill_cx: &amp;mut dyn <a class="trait" href="../trait.TraitEngine.html" title="trait rustc_trait_selection::traits::TraitEngine">TraitEngine</a>&lt;'tcx&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../struct.FulfillmentError.html" title="struct rustc_trait_selection::traits::FulfillmentError">FulfillmentError</a>&lt;'tcx&gt;&gt;&gt;;
}</code></pre><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.normalize" class="method"><a class="src rightside" href="../../../src/rustc_trait_selection/traits/normalize.rs.html#21-30">source</a><h4 class="code-header">fn <a href="#tymethod.normalize" class="fn">normalize</a>&lt;T: <a class="trait" href="../../../rustc_type_ir/fold/trait.TypeFoldable.html" title="trait rustc_type_ir::fold::TypeFoldable">TypeFoldable</a>&lt;<a class="struct" href="../../../rustc_middle/ty/context/struct.TyCtxt.html" title="struct rustc_middle::ty::context::TyCtxt">TyCtxt</a>&lt;'tcx&gt;&gt;&gt;(&amp;self, value: T) -&gt; <a class="struct" href="../../infer/struct.InferOk.html" title="struct rustc_trait_selection::infer::InferOk">InferOk</a>&lt;'tcx, T&gt;</h4></section></summary><div class="docblock"><p>Normalize a value using the <code>AssocTypeNormalizer</code>.</p>
<p>This normalization should be used when the type contains inference variables or the
projection may be fallible.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.deeply_normalize" class="method"><a class="src rightside" href="../../../src/rustc_trait_selection/traits/normalize.rs.html#46-61">source</a><h4 class="code-header">fn <a href="#tymethod.deeply_normalize" class="fn">deeply_normalize</a>&lt;T: <a class="trait" href="../../../rustc_type_ir/fold/trait.TypeFoldable.html" title="trait rustc_type_ir::fold::TypeFoldable">TypeFoldable</a>&lt;<a class="struct" href="../../../rustc_middle/ty/context/struct.TyCtxt.html" title="struct rustc_middle::ty::context::TyCtxt">TyCtxt</a>&lt;'tcx&gt;&gt;&gt;(
    self,
    value: T,
    fulfill_cx: &amp;mut dyn <a class="trait" href="../trait.TraitEngine.html" title="trait rustc_trait_selection::traits::TraitEngine">TraitEngine</a>&lt;'tcx&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../struct.FulfillmentError.html" title="struct rustc_trait_selection::traits::FulfillmentError">FulfillmentError</a>&lt;'tcx&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Deeply normalizes <code>value</code>, replacing all aliases which can by normalized in
the current environment. In the new solver this errors in case normalization
fails or is ambiguous.</p>
<p>In the old solver this simply uses <code>normalizes</code> and adds the nested obligations
to the <code>fulfill_cx</code>. This is necessary as we otherwise end up recomputing the
same goals in both a temporary and the shared context which negatively impacts
performance as these don’t share caching.</p>
<p>FIXME(-Znext-solver): This has the same behavior as <code>traits::fully_normalize</code>
in the new solver, but because of performance reasons, we currently reuse an
existing fulfillment context in the old solver. Once we also eagerly prove goals with
the old solver or have removed the old solver, remove <code>traits::fully_normalize</code> and
rename this function to <code>At::fully_normalize</code>.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-NormalizeExt%3C'tcx%3E-for-At%3C'_,+'tcx%3E" class="impl"><a class="src rightside" href="../../../src/rustc_trait_selection/traits/normalize.rs.html#15">source</a><a href="#impl-NormalizeExt%3C'tcx%3E-for-At%3C'_,+'tcx%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'tcx&gt; <a class="trait" href="trait.NormalizeExt.html" title="trait rustc_trait_selection::traits::normalize::NormalizeExt">NormalizeExt</a>&lt;'tcx&gt; for <a class="struct" href="../../infer/at/struct.At.html" title="struct rustc_trait_selection::infer::at::At">At</a>&lt;'_, 'tcx&gt;</h3></section></div><script src="../../../trait.impl/rustc_trait_selection/traits/normalize/trait.NormalizeExt.js" data-ignore-extern-crates="rustc_infer" async></script></section></div></main></body></html>