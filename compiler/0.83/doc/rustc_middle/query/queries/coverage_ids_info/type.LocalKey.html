<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `LocalKey` type in crate `rustc_middle`."><title>LocalKey in rustc_middle::query::queries::coverage_ids_info - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-49344e4802b2d48a.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="rustc_middle" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0-dev" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../../../../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc type"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../../rustc_middle/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../../rustc_middle/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2><a href="../../../../rustc_middle/index.html">rustc_<wbr>middle</a><span class="version">1.83.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Local<wbr>Key</a></h2><h3><a href="#aliased-type">Aliased type</a></h3><h3><a href="#variants">Variants</a></h3><ul class="block variant"><li><a href="#variant.AsyncDropGlueCtorShim" title="AsyncDropGlueCtorShim">AsyncDropGlueCtorShim</a></li><li><a href="#variant.CloneShim" title="CloneShim">CloneShim</a></li><li><a href="#variant.ClosureOnceShim" title="ClosureOnceShim">ClosureOnceShim</a></li><li><a href="#variant.ConstructCoroutineInClosureShim" title="ConstructCoroutineInClosureShim">ConstructCoroutineInClosureShim</a></li><li><a href="#variant.DropGlue" title="DropGlue">DropGlue</a></li><li><a href="#variant.FnPtrAddrShim" title="FnPtrAddrShim">FnPtrAddrShim</a></li><li><a href="#variant.FnPtrShim" title="FnPtrShim">FnPtrShim</a></li><li><a href="#variant.Intrinsic" title="Intrinsic">Intrinsic</a></li><li><a href="#variant.Item" title="Item">Item</a></li><li><a href="#variant.ReifyShim" title="ReifyShim">ReifyShim</a></li><li><a href="#variant.ThreadLocalShim" title="ThreadLocalShim">ThreadLocalShim</a></li><li><a href="#variant.VTableShim" title="VTableShim">VTableShim</a></li><li><a href="#variant.Virtual" title="Virtual">Virtual</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In rustc_<wbr>middle::<wbr>query::<wbr>queries::<wbr>coverage_<wbr>ids_<wbr>info</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">rustc_middle</a>::<wbr><a href="../../index.html">query</a>::<wbr><a href="../index.html">queries</a>::<wbr><a href="index.html">coverage_ids_info</a></span><h1>Type Alias <span class="type">LocalKey</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/rustc_middle/query/mod.rs.html#2285">source</a> </span></div><pre class="rust item-decl"><code>pub type LocalKey&lt;'tcx&gt; = <a class="enum" href="../../../ty/instance/enum.InstanceKind.html" title="enum rustc_middle::ty::instance::InstanceKind">InstanceKind</a>&lt;'tcx&gt;;</code></pre><h2 id="aliased-type" class="section-header">Aliased Type<a href="#aliased-type" class="anchor">§</a></h2><pre class="rust item-decl"><code>enum LocalKey&lt;'tcx&gt; {
<details class="toggle type-contents-toggle"><summary class="hideme"><span>Show 13 variants</span></summary>    Item(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>),
    Intrinsic(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>),
    VTableShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>),
    ReifyShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../../../ty/instance/enum.ReifyReason.html" title="enum rustc_middle::ty::instance::ReifyReason">ReifyReason</a>&gt;),
    FnPtrShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;),
    Virtual(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>),
    ClosureOnceShim {
        call_once: <a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>,
        track_caller: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    },
    ConstructCoroutineInClosureShim {
        coroutine_closure_def_id: <a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>,
        receiver_by_ref: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    },
    ThreadLocalShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>),
    DropGlue(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;&gt;),
    CloneShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;),
    FnPtrAddrShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;),
    AsyncDropGlueCtorShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;&gt;),
</details>}</code></pre><h2 id="variants" class="variants section-header">Variants<a href="#variants" class="anchor">§</a></h2><div class="variants"><section id="variant.Item" class="variant"><a href="#variant.Item" class="anchor">§</a><h3 class="code-header">Item(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>)</h3></section><div class="docblock"><p>A user-defined callable item.</p>
<p>This includes:</p>
<ul>
<li><code>fn</code> items</li>
<li>closures</li>
<li>coroutines</li>
</ul>
</div><section id="variant.Intrinsic" class="variant"><a href="#variant.Intrinsic" class="anchor">§</a><h3 class="code-header">Intrinsic(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>)</h3></section><div class="docblock"><p>An intrinsic <code>fn</code> item (with <code>"rust-intrinsic"</code> or <code>"platform-intrinsic"</code> ABI).</p>
<p>Alongside <code>Virtual</code>, this is the only <code>InstanceKind</code> that does not have its own callable MIR.
Instead, codegen and const eval “magically” evaluate calls to intrinsics purely in the
caller.</p>
</div><section id="variant.VTableShim" class="variant"><a href="#variant.VTableShim" class="anchor">§</a><h3 class="code-header">VTableShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>)</h3></section><div class="docblock"><p><code>&lt;T as Trait&gt;::method</code> where <code>method</code> receives unsizeable <code>self: Self</code> (part of the
<code>unsized_locals</code> feature).</p>
<p>The generated shim will take <code>Self</code> via <code>*mut Self</code> - conceptually this is <code>&amp;owned Self</code> -
and dereference the argument to call the original function.</p>
</div><section id="variant.ReifyShim" class="variant"><a href="#variant.ReifyShim" class="anchor">§</a><h3 class="code-header">ReifyShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../../../ty/instance/enum.ReifyReason.html" title="enum rustc_middle::ty::instance::ReifyReason">ReifyReason</a>&gt;)</h3></section><div class="docblock"><p><code>fn()</code> pointer where the function itself cannot be turned into a pointer.</p>
<p>One example is <code>&lt;dyn Trait as Trait&gt;::fn</code>, where the shim contains
a virtual call, which codegen supports only via a direct call to the
<code>&lt;dyn Trait as Trait&gt;::fn</code> instance (an <code>InstanceKind::Virtual</code>).</p>
<p>Another example is functions annotated with <code>#[track_caller]</code>, which
must have their implicit caller location argument populated for a call.
Because this is a required part of the function’s ABI but can’t be tracked
as a property of the function pointer, we use a single “caller location”
(the definition of the function itself).</p>
<p>The second field encodes <em>why</em> this shim was created. This allows distinguishing between
a <code>ReifyShim</code> that appears in a vtable vs one that appears as a function pointer.</p>
<p>This field will only be populated if we are compiling in a mode that needs these shims
to be separable, currently only when KCFI is enabled.</p>
</div><section id="variant.FnPtrShim" class="variant"><a href="#variant.FnPtrShim" class="anchor">§</a><h3 class="code-header">FnPtrShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;)</h3></section><div class="docblock"><p><code>&lt;fn() as FnTrait&gt;::call_*</code> (generated <code>FnTrait</code> implementation for <code>fn()</code> pointers).</p>
<p><code>DefId</code> is <code>FnTrait::call_*</code>.</p>
</div><section id="variant.Virtual" class="variant"><a href="#variant.Virtual" class="anchor">§</a><h3 class="code-header">Virtual(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</h3></section><div class="docblock"><p>Dynamic dispatch to <code>&lt;dyn Trait as Trait&gt;::fn</code>.</p>
<p>This <code>InstanceKind</code> does not have callable MIR. Calls to <code>Virtual</code> instances must be
codegen’d as virtual calls through the vtable.</p>
<p>If this is reified to a <code>fn</code> pointer, a <code>ReifyShim</code> is used (see <code>ReifyShim</code> above for more
details on that).</p>
</div><section id="variant.ClosureOnceShim" class="variant"><a href="#variant.ClosureOnceShim" class="anchor">§</a><h3 class="code-header">ClosureOnceShim</h3></section><div class="docblock"><p><code>&lt;[FnMut/Fn closure] as FnOnce&gt;::call_once</code>.</p>
<p>The <code>DefId</code> is the ID of the <code>call_once</code> method in <code>FnOnce</code>.</p>
<p>This generates a body that will just borrow the (owned) self type,
and dispatch to the <code>FnMut::call_mut</code> instance for the closure.</p>
</div><div class="sub-variant" id="variant.ClosureOnceShim.fields"><h4>Fields</h4><div class="sub-variant-field"><span id="variant.ClosureOnceShim.field.call_once" class="section-header"><a href="#variant.ClosureOnceShim.field.call_once" class="anchor field">§</a><code>call_once: <a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a></code></span></div><div class="sub-variant-field"><span id="variant.ClosureOnceShim.field.track_caller" class="section-header"><a href="#variant.ClosureOnceShim.field.track_caller" class="anchor field">§</a><code>track_caller: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span></div></div><section id="variant.ConstructCoroutineInClosureShim" class="variant"><a href="#variant.ConstructCoroutineInClosureShim" class="anchor">§</a><h3 class="code-header">ConstructCoroutineInClosureShim</h3></section><div class="docblock"><p><code>&lt;[FnMut/Fn coroutine-closure] as FnOnce&gt;::call_once</code></p>
<p>The body generated here differs significantly from the <code>ClosureOnceShim</code>,
since we need to generate a distinct coroutine type that will move the
closure’s upvars <em>out</em> of the closure.</p>
</div><div class="sub-variant" id="variant.ConstructCoroutineInClosureShim.fields"><h4>Fields</h4><div class="sub-variant-field"><span id="variant.ConstructCoroutineInClosureShim.field.coroutine_closure_def_id" class="section-header"><a href="#variant.ConstructCoroutineInClosureShim.field.coroutine_closure_def_id" class="anchor field">§</a><code>coroutine_closure_def_id: <a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a></code></span></div><div class="sub-variant-field"><span id="variant.ConstructCoroutineInClosureShim.field.receiver_by_ref" class="section-header"><a href="#variant.ConstructCoroutineInClosureShim.field.receiver_by_ref" class="anchor field">§</a><code>receiver_by_ref: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span></div></div><section id="variant.ThreadLocalShim" class="variant"><a href="#variant.ThreadLocalShim" class="anchor">§</a><h3 class="code-header">ThreadLocalShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>)</h3></section><div class="docblock"><p>Compiler-generated accessor for thread locals which returns a reference to the thread local
the <code>DefId</code> defines. This is used to export thread locals from dylibs on platforms lacking
native support.</p>
</div><section id="variant.DropGlue" class="variant"><a href="#variant.DropGlue" class="anchor">§</a><h3 class="code-header">DropGlue(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;&gt;)</h3></section><div class="docblock"><p><code>core::ptr::drop_in_place::&lt;T&gt;</code>.</p>
<p>The <code>DefId</code> is for <code>core::ptr::drop_in_place</code>.
The <code>Option&lt;Ty&lt;'tcx&gt;&gt;</code> is either <code>Some(T)</code>, or <code>None</code> for empty drop
glue.</p>
</div><section id="variant.CloneShim" class="variant"><a href="#variant.CloneShim" class="anchor">§</a><h3 class="code-header">CloneShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;)</h3></section><div class="docblock"><p>Compiler-generated <code>&lt;T as Clone&gt;::clone</code> implementation.</p>
<p>For all types that automatically implement <code>Copy</code>, a trivial <code>Clone</code> impl is provided too.
Additionally, arrays, tuples, and closures get a <code>Clone</code> shim even if they aren’t <code>Copy</code>.</p>
<p>The <code>DefId</code> is for <code>Clone::clone</code>, the <code>Ty</code> is the type <code>T</code> with the builtin <code>Clone</code> impl.</p>
</div><section id="variant.FnPtrAddrShim" class="variant"><a href="#variant.FnPtrAddrShim" class="anchor">§</a><h3 class="code-header">FnPtrAddrShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;)</h3></section><div class="docblock"><p>Compiler-generated <code>&lt;T as FnPtr&gt;::addr</code> implementation.</p>
<p>Automatically generated for all potentially higher-ranked <code>fn(I) -&gt; R</code> types.</p>
<p>The <code>DefId</code> is for <code>FnPtr::addr</code>, the <code>Ty</code> is the type <code>T</code>.</p>
</div><section id="variant.AsyncDropGlueCtorShim" class="variant"><a href="#variant.AsyncDropGlueCtorShim" class="anchor">§</a><h3 class="code-header">AsyncDropGlueCtorShim(<a class="struct" href="../../../../rustc_span/def_id/struct.DefId.html" title="struct rustc_span::def_id::DefId">DefId</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../ty/struct.Ty.html" title="struct rustc_middle::ty::Ty">Ty</a>&lt;'tcx&gt;&gt;)</h3></section><div class="docblock"><p><code>core::future::async_drop::async_drop_in_place::&lt;'_, T&gt;</code>.</p>
<p>The <code>DefId</code> is for <code>core::future::async_drop::async_drop_in_place</code>, the <code>Ty</code>
is the type <code>T</code>.</p>
</div></div><h2 id="layout" class="section-header">Layout<a href="#layout" class="anchor">§</a></h2><div class="docblock"><div class="warning"><p><strong>Note:</strong> Most layout information is <strong>completely unstable</strong> and may even differ between compilations. The only exception is types with certain <code>repr(...)</code> attributes. Please see the Rust Reference's <a href="https://doc.rust-lang.org/reference/type-layout.html">“Type Layout”</a> chapter for details on type layout guarantees.</p></div><p><strong>Size:</strong> 24 bytes</p><p><strong>Size for each variant:</strong></p><ul><li><code>Item</code>: 11 bytes</li><li><code>Intrinsic</code>: 11 bytes</li><li><code>VTableShim</code>: 11 bytes</li><li><code>ReifyShim</code>: 11 bytes</li><li><code>FnPtrShim</code>: 23 bytes</li><li><code>Virtual</code>: 23 bytes</li><li><code>ClosureOnceShim</code>: 11 bytes</li><li><code>ConstructCoroutineInClosureShim</code>: 11 bytes</li><li><code>ThreadLocalShim</code>: 11 bytes</li><li><code>DropGlue</code>: 23 bytes</li><li><code>CloneShim</code>: 23 bytes</li><li><code>FnPtrAddrShim</code>: 23 bytes</li><li><code>AsyncDropGlueCtorShim</code>: 23 bytes</li></ul></div><script src="../../../../type.impl/rustc_middle/ty/instance/enum.InstanceKind.js" data-self-path="rustc_middle::query::queries::coverage_ids_info::LocalKey" async></script></section></div></main></body></html>