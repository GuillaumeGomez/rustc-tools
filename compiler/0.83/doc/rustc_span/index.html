<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source positions and related helper functions."><title>rustc_span - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-49344e4802b2d48a.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rustc_span" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0-dev" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../rustc_span/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../rustc_span/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2><a href="../rustc_span/index.html">rustc_<wbr>span</a><span class="version">1.83.0-dev</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#note" title="Note">Note</a></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#statics" title="Statics">Statics</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>rustc_span</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/rustc_span/lib.rs.html#1-2639">source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Source positions and related helper functions.</p>
<p>Important concepts in this module include:</p>
<ul>
<li>the <em>span</em>, represented by <a href="struct.SpanData.html" title="struct rustc_span::SpanData"><code>SpanData</code></a> and related types;</li>
<li>source code as represented by a <a href="source_map/struct.SourceMap.html" title="struct rustc_span::source_map::SourceMap"><code>SourceMap</code></a>; and</li>
<li>interned strings, represented by <a href="symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol"><code>Symbol</code></a>s, with some common symbols available statically
in the <a href="symbol/sym/index.html" title="mod rustc_span::symbol::sym"><code>sym</code></a> module.</li>
</ul>
<p>Unlike most compilers, the span contains not only the position in the source code, but also
various other metadata, such as the edition and macro hygiene. This metadata is stored in
<a href="hygiene/struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext"><code>SyntaxContext</code></a> and <a href="hygiene/struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData"><code>ExpnData</code></a>.</p>
<h3 id="note"><a class="doc-anchor" href="#note">§</a>Note</h3>
<p>This API is completely unstable and subject to change.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.DesugaringKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.DesugaringKind.html" title="enum rustc_span::hygiene::DesugaringKind">DesugaringKind</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnData"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnData.html" title="struct rustc_span::hygiene::ExpnData">ExpnData</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnHash"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnHash.html" title="struct rustc_span::hygiene::ExpnHash">ExpnHash</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.ExpnId.html" title="struct rustc_span::hygiene::ExpnId">ExpnId</a>;</code></div></li><li><div class="item-name" id="reexport.ExpnKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.ExpnKind.html" title="enum rustc_span::hygiene::ExpnKind">ExpnKind</a>;</code></div></li><li><div class="item-name" id="reexport.LocalExpnId"><code>pub use hygiene::<a class="struct" href="hygiene/struct.LocalExpnId.html" title="struct rustc_span::hygiene::LocalExpnId">LocalExpnId</a>;</code></div></li><li><div class="item-name" id="reexport.MacroKind"><code>pub use hygiene::<a class="enum" href="hygiene/enum.MacroKind.html" title="enum rustc_span::hygiene::MacroKind">MacroKind</a>;</code></div></li><li><div class="item-name" id="reexport.SyntaxContext"><code>pub use hygiene::<a class="struct" href="hygiene/struct.SyntaxContext.html" title="struct rustc_span::hygiene::SyntaxContext">SyntaxContext</a>;</code></div></li><li><div class="item-name" id="reexport.Symbol"><code>pub use symbol::<a class="struct" href="symbol/struct.Symbol.html" title="struct rustc_span::symbol::Symbol">Symbol</a>;</code></div></li><li><div class="item-name" id="reexport.sym"><code>pub use symbol::<a class="mod" href="symbol/sym/index.html" title="mod rustc_span::symbol::sym">sym</a>;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="analyze_source_file/index.html" title="mod rustc_span::analyze_source_file">analyze_<wbr>source_<wbr>file</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="caching_source_map_view/index.html" title="mod rustc_span::caching_source_map_view">caching_<wbr>source_<wbr>map_<wbr>view</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="def_id/index.html" title="mod rustc_span::def_id">def_id</a></div></li><li><div class="item-name"><a class="mod" href="edit_distance/index.html" title="mod rustc_span::edit_distance">edit_<wbr>distance</a></div><div class="desc docblock-short">Edit distances.</div></li><li><div class="item-name"><a class="mod" href="edition/index.html" title="mod rustc_span::edition">edition</a></div></li><li><div class="item-name"><a class="mod" href="fatal_error/index.html" title="mod rustc_span::fatal_error">fatal_<wbr>error</a></div></li><li><div class="item-name"><a class="mod" href="hygiene/index.html" title="mod rustc_span::hygiene">hygiene</a></div><div class="desc docblock-short">Machinery for hygienic macros.</div></li><li><div class="item-name"><a class="mod" href="profiling/index.html" title="mod rustc_span::profiling">profiling</a></div></li><li><div class="item-name"><a class="mod" href="source_map/index.html" title="mod rustc_span::source_map">source_<wbr>map</a></div><div class="desc docblock-short">Types for tracking pieces of source code within a crate.</div></li><li><div class="item-name"><a class="mod" href="span_encoding/index.html" title="mod rustc_span::span_encoding">span_<wbr>encoding</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="symbol/index.html" title="mod rustc_span::symbol">symbol</a></div><div class="desc docblock-short">An “interner” is a data structure that associates values with usize tags and
allows bidirectional lookup; i.e., given a value, one can easily find the
type, and vice versa.</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.impl_pos.html" title="macro rustc_span::impl_pos">impl_<wbr>pos</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AttrId.html" title="struct rustc_span::AttrId">AttrId</a></div></li><li><div class="item-name"><a class="struct" href="struct.BytePos.html" title="struct rustc_span::BytePos">BytePos</a></div><div class="desc docblock-short">A byte offset.</div></li><li><div class="item-name"><a class="struct" href="struct.CachingSourceMapView.html" title="struct rustc_span::CachingSourceMapView">Caching<wbr>Source<wbr>MapView</a></div></li><li><div class="item-name"><a class="struct" href="struct.CharPos.html" title="struct rustc_span::CharPos">CharPos</a></div><div class="desc docblock-short">A character offset.</div></li><li><div class="item-name"><a class="struct" href="struct.DistinctSources.html" title="struct rustc_span::DistinctSources">Distinct<wbr>Sources</a></div></li><li><div class="item-name"><a class="struct" href="struct.ErrorGuaranteed.html" title="struct rustc_span::ErrorGuaranteed">Error<wbr>Guaranteed</a></div><div class="desc docblock-short">Useful type to use with <code>Result&lt;&gt;</code> indicate that an error has already
been reported to the user, so no need to continue checking.</div></li><li><div class="item-name"><a class="struct" href="struct.FileLines.html" title="struct rustc_span::FileLines">File<wbr>Lines</a></div></li><li><div class="item-name"><a class="struct" href="struct.FileNameDisplay.html" title="struct rustc_span::FileNameDisplay">File<wbr>Name<wbr>Display</a></div></li><li><div class="item-name"><a class="struct" href="struct.InnerSpan.html" title="struct rustc_span::InnerSpan">Inner<wbr>Span</a></div><div class="desc docblock-short">Range inside of a <code>Span</code> used for diagnostics when we only have access to relative positions.</div></li><li><div class="item-name"><a class="struct" href="struct.LineInfo.html" title="struct rustc_span::LineInfo">Line<wbr>Info</a></div></li><li><div class="item-name"><a class="struct" href="struct.Loc.html" title="struct rustc_span::Loc">Loc</a></div><div class="desc docblock-short">A source code location used for error reporting.</div></li><li><div class="item-name"><a class="struct" href="struct.MalformedSourceMapPositions.html" title="struct rustc_span::MalformedSourceMapPositions">Malformed<wbr>Source<wbr>MapPositions</a></div></li><li><div class="item-name"><a class="struct" href="struct.MultiByteChar.html" title="struct rustc_span::MultiByteChar">Multi<wbr>Byte<wbr>Char</a></div><div class="desc docblock-short">Identifies an offset of a multi-byte character in a <code>SourceFile</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.NormalizedPos.html" title="struct rustc_span::NormalizedPos">Normalized<wbr>Pos</a></div><div class="desc docblock-short">Identifies an offset of a character that was normalized away from <code>SourceFile</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.OffsetOverflowError.html" title="struct rustc_span::OffsetOverflowError">Offset<wbr>Overflow<wbr>Error</a></div></li><li><div class="item-name"><a class="struct" href="struct.RelativeBytePos.html" title="struct rustc_span::RelativeBytePos">Relative<wbr>Byte<wbr>Pos</a></div><div class="desc docblock-short">A byte offset relative to file beginning.</div></li><li><div class="item-name"><a class="struct" href="struct.SessionGlobals.html" title="struct rustc_span::SessionGlobals">Session<wbr>Globals</a></div><div class="desc docblock-short">Per-session global variables: this struct is stored in thread-local storage
in such a way that it is accessible without any kind of handle to all
threads within the compilation session, but is not accessible outside the
session.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceFile.html" title="struct rustc_span::SourceFile">Source<wbr>File</a></div><div class="desc docblock-short">A single source in the <a href="source_map/struct.SourceMap.html" title="struct rustc_span::source_map::SourceMap"><code>SourceMap</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileAndBytePos.html" title="struct rustc_span::SourceFileAndBytePos">Source<wbr>File<wbr>AndByte<wbr>Pos</a></div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileAndLine.html" title="struct rustc_span::SourceFileAndLine">Source<wbr>File<wbr>AndLine</a></div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileDiffs.html" title="struct rustc_span::SourceFileDiffs">Source<wbr>File<wbr>Diffs</a></div><div class="desc docblock-short">The source file lines in difference list form. This matches the form
used within metadata, which saves space by exploiting the fact that the
lines list is sorted and individual lines are usually not that long.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceFileHash.html" title="struct rustc_span::SourceFileHash">Source<wbr>File<wbr>Hash</a></div><div class="desc docblock-short">The hash of the on-disk source file used for debug info and cargo freshness checks.</div></li><li><div class="item-name"><a class="struct" href="struct.Span.html" title="struct rustc_span::Span">Span</a></div><div class="desc docblock-short">A compressed span.</div></li><li><div class="item-name"><a class="struct" href="struct.SpanData.html" title="struct rustc_span::SpanData">Span<wbr>Data</a></div><div class="desc docblock-short">Represents a span.</div></li><li><div class="item-name"><a class="struct" href="struct.StableSourceFileId.html" title="struct rustc_span::StableSourceFileId">Stable<wbr>Source<wbr>File<wbr>Id</a></div><div class="desc docblock-short">This is a <a href="struct.SourceFile.html" title="struct rustc_span::SourceFile">SourceFile</a> identifier that is used to correlate source files between
subsequent compilation sessions (which is something we need to do during
incremental compilation).</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ExternalSource.html" title="enum rustc_span::ExternalSource">External<wbr>Source</a></div></li><li><div class="item-name"><a class="enum" href="enum.ExternalSourceKind.html" title="enum rustc_span::ExternalSourceKind">External<wbr>Source<wbr>Kind</a></div><div class="desc docblock-short">The state of the lazy external source loading mechanism of a <code>SourceFile</code>.</div></li><li><div class="item-name"><a class="enum" href="enum.FileName.html" title="enum rustc_span::FileName">File<wbr>Name</a></div><div class="desc docblock-short">Differentiates between real files and common virtual files.</div></li><li><div class="item-name"><a class="enum" href="enum.FileNameDisplayPreference.html" title="enum rustc_span::FileNameDisplayPreference">File<wbr>Name<wbr>Display<wbr>Preference</a></div></li><li><div class="item-name"><a class="enum" href="enum.RealFileName.html" title="enum rustc_span::RealFileName">Real<wbr>File<wbr>Name</a></div></li><li><div class="item-name"><a class="enum" href="enum.SourceFileHashAlgorithm.html" title="enum rustc_span::SourceFileHashAlgorithm">Source<wbr>File<wbr>Hash<wbr>Algorithm</a></div></li><li><div class="item-name"><a class="enum" href="enum.SourceFileLines.html" title="enum rustc_span::SourceFileLines">Source<wbr>File<wbr>Lines</a></div></li><li><div class="item-name"><a class="enum" href="enum.SpanLinesError.html" title="enum rustc_span::SpanLinesError">Span<wbr>Lines<wbr>Error</a></div></li><li><div class="item-name"><a class="enum" href="enum.SpanSnippetError.html" title="enum rustc_span::SpanSnippetError">Span<wbr>Snippet<wbr>Error</a></div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.DUMMY_SP.html" title="constant rustc_span::DUMMY_SP">DUMMY_<wbr>SP</a></div><div class="desc docblock-short">The dummy span has zero position, length, and context, and no parent.</div></li></ul><h2 id="statics" class="section-header">Statics<a href="#statics" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="static" href="static.SESSION_GLOBALS.html" title="static rustc_span::SESSION_GLOBALS">SESSION_<wbr>GLOBALS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="static" href="static.SPAN_TRACK.html" title="static rustc_span::SPAN_TRACK">SPAN_<wbr>TRACK</a></div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.HashStableContext.html" title="trait rustc_span::HashStableContext">Hash<wbr>Stable<wbr>Context</a></div><div class="desc docblock-short">Requirements for a <code>StableHashingContext</code> to be used in this crate.</div></li><li><div class="item-name"><a class="trait" href="trait.Pos.html" title="trait rustc_span::Pos">Pos</a></div></li><li><div class="item-name"><a class="trait" href="trait.SpanDecoder.html" title="trait rustc_span::SpanDecoder">Span<wbr>Decoder</a></div><div class="desc docblock-short">This trait is used to allow decoder specific encodings of certain types.
It is similar to rustc_type_ir’s TyDecoder.</div></li><li><div class="item-name"><a class="trait" href="trait.SpanEncoder.html" title="trait rustc_span::SpanEncoder">Span<wbr>Encoder</a></div><div class="desc docblock-short">This trait is used to allow encoder specific encodings of certain types.
It is similar to rustc_type_ir’s TyEncoder.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.char_width.html" title="fn rustc_span::char_width">char_<wbr>width</a></div></li><li><div class="item-name"><a class="fn" href="fn.create_default_session_globals_then.html" title="fn rustc_span::create_default_session_globals_then">create_<wbr>default_<wbr>session_<wbr>globals_<wbr>then</a></div><div class="desc docblock-short">Default edition, no source map.</div></li><li><div class="item-name"><a class="fn" href="fn.create_session_globals_then.html" title="fn rustc_span::create_session_globals_then">create_<wbr>session_<wbr>globals_<wbr>then</a></div></li><li><div class="item-name"><a class="fn" href="fn.create_session_if_not_set_then.html" title="fn rustc_span::create_session_if_not_set_then">create_<wbr>session_<wbr>if_<wbr>not_<wbr>set_<wbr>then</a></div><div class="desc docblock-short">No source map.</div></li><li><div class="item-name"><a class="fn" href="fn.normalize_newlines.html" title="fn rustc_span::normalize_newlines">normalize_<wbr>newlines</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Replaces <code>\r\n</code> with <code>\n</code> in-place in <code>src</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.normalize_src.html" title="fn rustc_span::normalize_src">normalize_<wbr>src</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Normalizes the source code and records the normalizations.</div></li><li><div class="item-name"><a class="fn" href="fn.remove_bom.html" title="fn rustc_span::remove_bom">remove_<wbr>bom</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Removes UTF-8 BOM, if any.</div></li><li><div class="item-name"><a class="fn" href="fn.set_session_globals_then.html" title="fn rustc_span::set_session_globals_then">set_<wbr>session_<wbr>globals_<wbr>then</a></div></li><li><div class="item-name"><a class="fn" href="fn.with_metavar_spans.html" title="fn rustc_span::with_metavar_spans">with_<wbr>metavar_<wbr>spans</a></div></li><li><div class="item-name"><a class="fn" href="fn.with_session_globals.html" title="fn rustc_span::with_session_globals">with_<wbr>session_<wbr>globals</a></div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.FileLinesResult.html" title="type rustc_span::FileLinesResult">File<wbr>Lines<wbr>Result</a></div></li></ul></section></div></main></body></html>