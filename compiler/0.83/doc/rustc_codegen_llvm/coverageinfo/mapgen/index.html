<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `mapgen` mod in crate `rustc_codegen_llvm`."><title>rustc_codegen_llvm::coverageinfo::mapgen - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-49344e4802b2d48a.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="rustc_codegen_llvm" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0-dev" data-channel="nightly" data-search-js="search-e056c65ede92db13.js" data-settings-js="settings-805db61a62df4bd2.js" ><script src="../../../static.files/storage-1d39b6787ed640ff.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-f070b9041d14864c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-0111fcff984fae8f.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../rustc_codegen_llvm/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../rustc_codegen_llvm/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2><a href="../../../rustc_codegen_llvm/index.html">rustc_<wbr>codegen_<wbr>llvm</a><span class="version">1.83.0-dev</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module mapgen</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In rustc_<wbr>codegen_<wbr>llvm::<wbr>coverageinfo</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../index.html">rustc_codegen_llvm</a>::<wbr><a href="../index.html">coverageinfo</a></span><h1>Module <span>mapgen</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/rustc_codegen_llvm/coverageinfo/mapgen.rs.html#1-487">source</a> </span></div><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.GlobalFileTable.html" title="struct rustc_codegen_llvm::coverageinfo::mapgen::GlobalFileTable">Global<wbr>File<wbr>Table</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Maps “global” (per-CGU) file ID numbers to their underlying filenames.</div></li><li><div class="item-name"><a class="struct" href="struct.LocalFileId.html" title="struct rustc_codegen_llvm::coverageinfo::mapgen::LocalFileId">Local<wbr>File<wbr>Id</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.UsageSets.html" title="struct rustc_codegen_llvm::coverageinfo::mapgen::UsageSets">Usage<wbr>Sets</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.VirtualFileMapping.html" title="struct rustc_codegen_llvm::coverageinfo::mapgen::VirtualFileMapping">Virtual<wbr>File<wbr>Mapping</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Holds a mapping from “local” (per-function) file IDs to “global” (per-CGU)
file IDs.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.add_unused_function_coverage.html" title="fn rustc_codegen_llvm::coverageinfo::mapgen::add_unused_function_coverage">add_<wbr>unused_<wbr>function_<wbr>coverage</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.add_unused_functions.html" title="fn rustc_codegen_llvm::coverageinfo::mapgen::add_unused_functions">add_<wbr>unused_<wbr>functions</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Each CGU will normally only emit coverage metadata for the functions that it actually generates.
But since we don’t want unused functions to disappear from coverage reports, we also scan for
functions that were instrumented but are not participating in codegen.</div></li><li><div class="item-name"><a class="fn" href="fn.encode_mappings_for_function.html" title="fn rustc_codegen_llvm::coverageinfo::mapgen::encode_mappings_for_function">encode_<wbr>mappings_<wbr>for_<wbr>function</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Using the expressions and counter regions collected for a single function,
generate the variable-sized payload of its corresponding <code>__llvm_covfun</code>
entry. The payload is returned as a vector of bytes.</div></li><li><div class="item-name"><a class="fn" href="fn.finalize.html" title="fn rustc_codegen_llvm::coverageinfo::mapgen::finalize">finalize</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Generates and exports the Coverage Map.</div></li><li><div class="item-name"><a class="fn" href="fn.generate_coverage_map.html" title="fn rustc_codegen_llvm::coverageinfo::mapgen::generate_coverage_map">generate_<wbr>coverage_<wbr>map</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Construct coverage map header and the array of function records, and combine them into the
coverage map. Save the coverage map data into the LLVM IR as a static global using a
specific, well-known section and name.</div></li><li><div class="item-name"><a class="fn" href="fn.prepare_usage_sets.html" title="fn rustc_codegen_llvm::coverageinfo::mapgen::prepare_usage_sets">prepare_<wbr>usage_<wbr>sets</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Prepare sets of definitions that are relevant to deciding whether something
is an “unused function” for coverage purposes.</div></li><li><div class="item-name"><a class="fn" href="fn.save_function_record.html" title="fn rustc_codegen_llvm::coverageinfo::mapgen::save_function_record">save_<wbr>function_<wbr>record</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Construct a function record and combine it with the function’s coverage mapping data.
Save the function record into the LLVM IR as a static global using a
specific, well-known section and name.</div></li></ul></section></div></main></body></html>